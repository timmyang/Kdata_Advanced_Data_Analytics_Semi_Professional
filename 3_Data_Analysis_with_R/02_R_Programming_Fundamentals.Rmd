---
title: "Part 2: R Programming Fundamentals"
output: rmarkdown::github_document
---

# Table of Contents

- **Chapter 1 - R 소개 (Introduction to R)**
  - 데이터 분석 도구의 현황
  
- **Chapter 2 - R 기초 - 1 (R Basics - 1)**
  - 통계 패키지 R
  - 변수와 벡터 생성

- **Chapter 3 - R 기초 - 2 (R Basics - 2)**
  - R 기초 중의 기초
  - R 프로그램 소개
  - 백터의 연산
  - 백터의 기초통계
  - R 프로그래밍시 자주하는 실수
  

# Chapter 1 - R 소개 (Introduction to R)

## 1. 데이터 분석 도구의 현황

#### 가. R의 탄생

- R은 오픈소스 프로그램으로 통계/데이터마이닝과 그래프를 위한 언어이다
- 다양한 최신 통계분석과 마이닝 기능을 제공한다
- 세계적으로 많은 사용자들이 다양한 예제를 공유한다
- 다양한 기능을 지원하는 많은 패키지가 수시로 업데이트 된다

#### 나. 분석도구의 비교

- **프로그램 비용**
  - **SAS:** 유료, 고가
  - **SPSS:** 유료, 고가
  - **오픈소스 R:** 오픈소스
- **설치 용량**
  - **SAS:** 대용량
  - **SPSS:** 대용량
  - **오픈소스 R:** 모듈화로 간단
- **다양한 모듈 지원 및 비용**
  - **SAS:** 별도구매
  - **SPSS:** 별도구매
  - **오픈소스 R:** 오픈소스
- **최근 알고리즘 및 기술반영**
  - **SAS:** 느림
  - **SPSS:** 다소느림
  - **오픈소스 R:** 매우빠름
- **학습자료 입수의 편의성**
  - **SAS:** 유료 도서 위주
  - **SPSS:** 유료 도서 위주
  - **오픈소스 R:** 공개 논문 및 자료 많음
- **질의를 위한 공개 커뮤니티**
  - **SAS:** NA
  - **SPSS:** NA
  - **오픈소스 R:** 매우 활발

#### 다. R의 특징

- **오픈소스 프로그램**
  - 사용자가 커뮤니티에 도움 요청이 쉽다
  - 많은 패키지가 수시로 업데이트 된다
  
- **그래픽 및 성능**
  - 프로그래밍이나 그래픽 측면 등 대부분의 주요 특징들에서 상용 프로그램과 대등하거나 월등하다

- **시스템 데이터 저장 방식**
  - 각 세션 사이마다 시스템에 데이터셋을 저장하므로 매번 데이터를 로딩할 필요가 없고 명령어 스토리도 저장 가능하다
  
- **모든 운영체제**
  - 윈도우, 맥, 리눅스 운영체제에서 사용 가능하다
  
- **표준 플랫폼**
  - S 통계 언어를 기반으로 구현된다
  - R/S/ 플랫폼은 통계전문가들의 사실상의 표준 플랫폼이다
  
- **객체지향언어이며 함수형 언어**
  - 통계 기능뿐만 아니라 일반 프로그래밍 언어처럼 자동화하거나 새로운 함수를 생성하여 사용 가능하다
  - **객체지향 언어의 특징**
    - SAS, SPSS에서 회기분석시, 화면에 결과가 산더미로 나오게 된다.
    - 고로 분석결과를 활용하기 위해서는 추가로 프로그래밍을 하거나 별도의 작업이 필요하다
    - 하지만 R은 추정계수, 표준오차, 잔차 등 결과값을 객체(object)에 저장하여 필요한 부분을 호출하여 쉽게 활용 가능하다
  - **함수형 언어의 특징**
    - 더욱 깔끔하고 단축된 코드
    - 매우 빠른 코드 수행 속도
    - 단순한 코드로 디버깅 노력 감소
    - 병렬 프로그래밍으로의 전환이 더욱 용이
   

#### 라. R 스튜디오

- 오픈소스이며 다양한 운영체계를 지원한다
- R 스튜디오는 메모리에 변수가 어떻게 되어 있는지와 타입이 무엇인지 볼 수 있고, 스크립트관리와 도큐멘테잉션이 편리하다
- 코딩을 해야하는 부담이 있으나 스크립트용 프로그래밍으로 어렵지 않게 자동화가 가능하다
- **래틀(Rattle)** 은 GUI가 패키지와 긴밀하게 결합돼 있어 정해진 기능만 사용 가능해 업그레이드가 제대로 되지 않으면 통합성에 문제가 발생할 수 있다

#### 마. R 기반의 작업 환경

- 작업환경은 업무 규모와 본인에게 익숙한 환경이 무엇인지를 기준으로 선택한다
- 기업환경에서는 64bit 환경의 듀얼코어, 32GM RAM, 2TB 디스크, 리눅스 운영체제를 추천한다
- **R의 메모리**
  - 64bit 유닉스 환경
    - 메모리 무제한
  - x86 64bit 환경
    - 128TB 까지 지원
  - 64bit 윈도우형
    - 8TB 까지 지원


# Chapter 2 - R 기초 - 1 (R Basics - 1)

## 1. 통계 패키지 R

#### 가. R 스튜디오 구성화면

- Script, Console, Workspace, Files/Plots/Packages/Help/Viewer

#### 나. RGUI의 화면 구성

- **패키지(Package)**
  - 가) 패키지란
    - R 함수와 데이터 및 컴파일된 코드의 모임
  - 나) 패키지 불러들이기
    - **하드디스크**
      - R을 설치하거나 업데이트를 통해 설치
    - **웹**
      - 2014년 CRAN 저장소에는 약 5000개의 유용한 패키지가 자동설치
      - Install.packages("AID")
    - **패키지 도움말**
      - library(help = AID)
        - 다운로드 된 AID 패키지의 help 다큐먼트를 보여준다
      - help(package = AID)
        - 웹을 통해 AID 패키지의 다큐먼트를 보여준다
        
- **프로그램 파일 실행**
  - **스크립트로 프로그래밍 된 파일 실행하기**
    - R 코드
      - source("파일명")
    - 비고
      - 오른쪽 방향키
  - **프로그램 파일**
    - R 코드
      - sink(file, append, split) 함수
        - R코드 실행 결과를 특정 파일에서 출력
    - 비고
      - file: 출력할 파일명(디렉토리 포함 또는 디폴트 디렉토리)
      - append: 파일에 결과를 덮어쓰거나 추가해서 출력 (디폴트 값(FALSE)는 덮어쓰기)
      - split: 출력파일에만 출력하거나 콘솔창에 출력(디폴트 값(FALSE)는 파일에만 실행 결과 출력)
      - <예시>
        - sink("a_out")
        - sink("d:₩dataedu₩R₩a_out")
    - R 코드
      - pdf( )함수
        - 그래픽 출력을 pdf 파일로 지정
    - 비고
      - <예시>
        - pdf("a_out.pdf)
        - pdf("d:₩dataedu₩R₩a_out.pdf)
    - R 코드
      - dev.off( )로 파일 닫기
      
- **배치모드 기능**
  - 배치모드
    - 배치모드 방식은 사용자와 인터렉션이 필요하지 않는 방식으로 매일 돌아가야 하는 시스템에서 프로세스를 자동화 할 떄 유용
  - 배치파일 실행 명령
    - $R CMD BATCH batch.R 이라고 윈도우 도스창에서 실행한다
  - Path 지정
    - '내컴퓨터'에 오른쪽 마우스 클릭 -> 속성 -> 고급시스템 설정 -> 환경변수 클릭 -> 변수명 path를 클릭 -> R 프로그램의 실행파일의 위치를 찾아서 추가 -> 저장
  - 배치파일 실행
    - 윈도의 창의 batch.R 실행파일에 있는 위치에서 "R CMD BATCH batch.R"를 실행한다
    
**기출문제**  
**51. 사용자와 인터렉션이 필요하지 않는 방식으로 매일 돌아가야 하는 시스템에서 프로세스를 자동화 할 때 유용한 시스템을 무엇이라고 하는가?**

배치모드


## 2. 변수와 백터 생성

- R 데이터 유형과 객체
  - **숫자(Number)**
    - integer, double
  - **논리(Logical)**
    - True(T), False(F)
  - **문자(Character)**
    - "a"," abc"


# Chapter 3 - R 기초 - 2 (R Basics - 2)

#### 1. R 기초 중에 기초

- **출력하기**
  - print( )
    - 출력형식을 지절할 필요 없음
    - 한번에 하나의 객체만 출력
  - 비고
    - 커맨드 프롬프트에 변수나 표현식을 입력
    - <예시>
      - print(a)
      - cat("a", "b", "c")
- **변수에 값 할당하기 (대입 연산자)**
  - <-
  - <<-
  - =
  - ->
- **변수 목록보기**
  - ls()
  - ls.str()
- **변수 삭제하기**
  - R 코드
    - rm()
  - 비고
    - rm(list = ls())
      - 모든 변수를 삭제할 때 사용
- **벡터 생성하기**
  - R 코드
    - c()
  - 비고
    - 벡터의 원소 중 하나라도 문자가 있으면 모든 원소의 모드는 문자형태로 변한 됨
- **R 함수 정의하기**
  - R 코드
    - function(매개변수1, 매개변수2, ..., 매개변수n) {
        expr1
        expr2
        ...
        exprm
    }
  - 비고
    - <expr의 특징>
      - 지역변수
        - 단순히 값을 대입하기만 하면 지역변수로 생성되고, 함수가 종료되면 지역변수는 삭제 됨
      - 조건부 실행
        - if 문
      - 반복 실행
        - for 문
        - while 문
        - repeat 문
      - 전역변수
        - <<-를 사용하여 전역변수로 지정할 수 있지만 추천하지 않음

#### 2. R 프로그램 소개

- **데이터 할당**
  - a <- 1
  - a = 1
- **화면 프린트**
  - a
  - print(a)
    - print 함수
- **결합**
  - x <- c(1, 2, 3, 4)
  - x <- c(6.25, 3.14, 5.18)
  - x <- c("fee", "fie", "fun")
  - x <- c(x, y, z)
    - c( ) 함수는 문자, 숫자, 논리값, 변수를 모드 결합 가능하며 벡터와 데이터셋을 생성 가능
- **수열**
  - 1:5
  - 9:-2
  - seq(from = 0, to = 20, by = 2)
  - seq(from = 0, to = 20, length.out = 5)
    - 콜론(:)과 seq( ) 함수를 사용하여 시작갑에서 최종값까지의 연속적인 숫자 생성
    - seq( ) 함수는 간격과 결과값의 길이를 제한 가능
- **반복**
  - rep(1, time = 5)
  - rep(1:4, each = 2)
  - rep(c, each = 2)
    - rep( ) 함수는 숫자나 변수의 값들을 time 인자에 지정한 횟수만큼 번복
- **문자 붙이기**
  - A <- paste("a", "b", "c", sep = "-")
  - paste(A, c("e", "f"))
    - [1] "a-b-c e", "a-b-c f"
  - paste(A, 10, sep = " ")
    - paste( ) 함수는 문자열을 sep 인자에 지정한 구분자로 연결시켜 줌
- **문자열 추출**
  - substr("Bigdataanalysis", 1, 4)
    - substr(문자열, 시작점, 끝점) 함수는 문자열의 특정부분을 추출 가능
- **논리값**
  - a <- TRUE
  - a <- T
  - b <- FALSE
  - b <- F
    - T도 TRUE로 인식
- **논리 연산자**
  - ==
  - !=
  - <
  - <=
  - '>'
  - '>='
- **벡터의 원소 선택하기**
  - V[n]: 선택하고자 하는 자리수
  - V[-n]: 제외하고자 하는 자리수
    - n은 원소의 자리수
    - V는 벡터의 이름

#### 3. 벡터의 연산

- [ [[
  - 인덱스
    - a[1]
- $
  - 요소 뽑아내기, 슬롯 뽑아내기
    - a$coef
- ^
  - 지수
    - 5^2
- '-, +'
  - 다항 마이너스와 플러스 부호
    - -3, +5
- : 
  - 수열 생성
    - 1:10
- %any%
  - 특수 연산자
    - %/% 나눗셈 몫
    - %% 나눗셈 나머지
    - %*% 행렬의 곱
- '* /'
  - 곱하기, 나누기
    - 3*5, 3/5
- '+ -'
  - 더하기, 빼기
    - 3 + 5
- ==, !=, <>, <=, >=
  - 비교
    - 3 == 5
- !
  - 논리 부정
    - !(3 == 5)
- &
  - 논리 "and", 단축(short-circuit) "and"
    - TRUE & TRUE
- |
  - 논리 "or", 단축(short-circuit) "or"
    - TRUE | TRUE
- ~
  - 식(formula)
    - lm(log(brain) ~ log(body), data = Animals)
- '->, ->>'
  - 오른쪽 대입
    - 3 -> a
- =
  - 대입(오른쪽을 왼쪽으로)
    - a = 3
- <-, <<-
  - 대입(오른쪽을 왼쪽으로)
    - a <- 3
- ?
  - 도움말
    - ?lm

#### 4. 벡터의 기초통계
  - 평균
    - mean(변수)
  - 합계
    - sum(변수)
  - 중앙값
    - median(변수)
  - 로그
    - log(변수)
  - 표준편차
    - sd(변수)
  - 분산
    - var(변수)
  - 공분산
    - cov(변수)
  - 상관계수
    - cor(변수1, 변수2)
  - 변수의 길이 값
    - length(변수)

#### 5. R 프로그래밍시 자주하는 실수

- **함수를 불러오고 괄호닫기**
  - function 함수에서의 { }
  - 함수의 ( )
- **윈도우 파일 경로에서 역슬래시를 두 번씩 쓰기**
  - f:₩dataedu₩r₩test.csv
    - f:dataedurtest.csv로 인식
    - \ (역슬래쉬, ₩)를 2번 쓰거나
    - / (슬래쉬)를 1번 써야함
- **<- 사이를 붙여쓰기**
  - x<-pi
    - Error: object "x" not found의 오류메시지
- **여러줄을 넘어서 식을 계속 이어갈 때**

```{r}
sum <- 1 + 2 + 3
+ 4 + 5
sum
```
- **== 대신 = 를 사용하지 말 것**
  - == 비교 연산자
  - = 대입 연산자
- **1:(n + 1) 대신 1:n + 1 으로 쓰지 말 것**
```{r}
n <- 5

1:n + 1
1:(n + 1)
```
- **패키지를 불러오고 library( )나 require( )를 수행할 것**
- **2번 써아햘 것과 1번 써야할 것을 혼돈하지 말 것**
  - aList[[a]] vs aList[a]
  - && vs &
  - || vs |
- **인자의 개수를 정확히 사용할 것**
  - mean(9, 10, 11)
  
**기출문제**  
**52. Carseats 데이터프레임은 400개 상점에서 판매 중인 유아용 카시트의 재료이고, Sales 변수는 해당 상점에서 판매된 카시트의 수를 나타낸다. 다음 중 R패키지에서 Sales 변수의 표준편차를 계산하기 위한 식으로 가장 부적절한 것은?**

1. stdev(Carseats$Sales)  
2. sd(Carseats$Sales)  
3. sqrt(var(Carseats$Sales))  
4. var(Carseats$Sales)^(1/2)

정답: 1번